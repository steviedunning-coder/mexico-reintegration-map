<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mexico Reintegration Map</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
 integrity="sha256-sA+4JDf4wqSMPWz6jBq9Q3r7xv2GXj2e1Uj4yV4hC7k=" crossorigin=""/>
<style>
  #map { height: 95vh; width: 100%; }
  .legend { background: white; padding: 10px; line-height: 1.5; }
</style>
</head>
<body>

<h2>Mexico Reintegration Map</h2>
<div id="map"></div>
<div class="legend" id="legend">
  <strong>Legend:</strong><br>
   State Marker (click for info)<br>
   M茅xico te Abraza hub<br>
  <br>
  Data source: <a href="http://www.politicamigratoria.gob.mx/es/PoliticaMigratoria/tablero_estadistica" target="_blank">Bolet铆n Estad铆stico de Migraci贸n, Unidad de Pol铆tica Migratoria, SEGOB, 2025</a>
</div>
<button onclick="toggleLanguage()">Toggle EN/ES</button>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
 integrity="sha256-oM2Q5iV+pJHzmua4eM+Px8Gpry6D+8K7FZfXuoU5rPo=" crossorigin=""></script>

<script>
// Language toggle
let currentLang = 'en';
function toggleLanguage() {
    currentLang = currentLang === 'en' ? 'es' : 'en';
    for (let key in markers) {
        markers[key].bindPopup(getPopupContent(key));
    }
}

// Map initialization
const map = L.map('map').setView([23, -102], 5); // center Mexico

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors'
}).addTo(map);

// State data
const stateData = {
"Aguascalientes": {en:{desc:"No state-level reintegration program identified (2025). Federal options available.", link:"https://www.gob.mx/bienestar", returnees:1585, est2026:1600}, es:{desc:"No se identifica programa estatal de reintegraci贸n (2025). Opciones federales disponibles.", link:"https://www.gob.mx/bienestar", returnees:1585, est2026:1600}},
"Baja California": {en:{desc:"Federal and NGO programs support returned migrants.", link:"https://www.gob.mx/bienestar", returnees:3025, est2026:3100}, es:{desc:"Programas federales y ONG apoyan a migrantes retornados.", link:"https://www.gob.mx/bienestar", returnees:3025, est2026:3100}},
"Baja California Sur": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:145, est2026:150}, es:{desc:"No se identifica programa estatal de reintegraci贸n (2025).", link:"https://www.gob.mx/bienestar", returnees:145, est2026:150}},
"Campeche": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:432, est2026:440}, es:{desc:"No se identifica programa estatal de reintegraci贸n (2025).", link:"https://www.gob.mx/bienestar", returnees:432, est2026:440}},
"Chiapas": {en:{desc:"Refugee & migrant stabilization, municipal hubs active.", link:"https://www.gob.mx/bienestar", returnees:1160, est2026:1200}, es:{desc:"Estabilizaci贸n de refugiados y migrantes, hubs municipales activos.", link:"https://www.gob.mx/bienestar", returnees:1160, est2026:1200}},
"Chihuahua": {en:{desc:"Federal + municipal shelters support integration of returned migrants.", link:"https://www.gob.mx/bienestar", returnees:5180, est2026:5300}, es:{desc:"Refugios federales + municipales apoyan la integraci贸n de migrantes retornados.", link:"https://www.gob.mx/bienestar", returnees:5180, est2026:5300}},
"Coahuila": {en:{desc:"Federal employment linkage programs.", link:"https://www.gob.mx/bienestar", returnees:2017, est2026:2050}, es:{desc:"Programas federales de vinculaci贸n laboral.", link:"https://www.gob.mx/bienestar", returnees:2017, est2026:2050}},
"Colima": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:576, est2026:600}, es:{desc:"No se identifica programa estatal de reintegraci贸n (2025).", link:"https://www.gob.mx/bienestar", returnees:576, est2026:600}},
"Durango": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:2305, est2026:2350}, es:{desc:"No se identifica programa estatal de reintegraci贸n (2025).", link:"https://www.gob.mx/bienestar", returnees:2305, est2026:2350}},
"Guanajuato": {en:{desc:"MIGRANTEQUIERO state reintegration program active.", link:"https://migrantequiero.guanajuato.gob.mx", returnees:9780, est2026:10000}, es:{desc:"Programa estatal MIGRANTEQUIERO activo.", link:"https://migrantequiero.guanajuato.gob.mx", returnees:9780, est2026:10000}},
"Guerrero": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:14260, est2026:14500}, es:{desc:"No se identifica programa estatal de reintegraci贸n (2025).", link:"https://www.gob.mx/bienestar", returnees:14260, est2026:14500}},
"Hidalgo": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:3736, est2026:3800}, es:{desc:"No se identifica programa estatal de reintegraci贸n (2025).", link:"https://www.gob.mx/bienestar", returnees:3736, est2026:3800}},
"Jalisco": {en:{desc:"Fondo de Apoyo a Migrantes.", link:"https://www.jalisco.gob.mx", returnees:6040, est2026:6200}, es:{desc:"Fondo de Apoyo a Migrantes.", link:"https://www.jalisco.gob.mx", returnees:6040, est2026:6200}},
"Mexico City": {en:{desc:"Multi-agency integration services.", link:"https://www.cdmx.gob.mx", returnees:3169, est2026:3250}, es:{desc:"Servicios de integraci贸n multi-agencia.", link:"https://www.cdmx.gob.mx", returnees:3169, est2026:3250}},
"Estado de M茅xico": {en:{desc:"Fondo de Apoyo a Migrantes.", link:"https://www.edomex.gob.mx", returnees:7203, est2026:7400}, es:{desc:"Fondo de Apoyo a Migrantes.", link:"https://www.edomex.gob.mx", returnees:7203, est2026:7400}},
"Michoac谩n": {en:{desc:"Pilot productive return programs active.", link:"https://www.gob.mx/bienestar", returnees:11388, est2026:11500}, es:{desc:"Programas piloto de retorno productivo activos.", link:"https://www.gob.mx/bienestar", returnees:11388, est2026:11500}},
"Morelos": {en:{desc:"Morelos te Abraza.", link:"https://www.morelos.gob.mx", returnees:1873, est2026:1900}, es:{desc:"Morelos te Abraza.", link:"https://www.morelos.gob.mx", returnees:1873, est2026:1900}},
"Nayarit": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:2016, est2026:2050}, es:{desc:"No se identifica programa estatal de reintegraci贸n (2025).", link:"https://www.gob.mx/bienestar", returnees:2016, est2026:2050}},
"Nuevo Le贸n": {en:{desc:"Employment-focused reintegration.", link:"https://www.nl.gob.mx", returnees:1152, est2026:1200}, es:{desc:"Reintegraci贸n enfocada al empleo.", link:"https://www.nl.gob.mx", returnees:1152, est2026:1200}},
"Oaxaca": {en:{desc:"Oaxaca es tu Tierra program active.", link:"https://www.gob.mx/bienestar", returnees:12526, est2026:12700}, es:{desc:"Programa Oaxaca es tu Tierra activo.", link:"https://www.gob.mx/bienestar", returnees:12526, est2026:12700}},
"Puebla": {en:{desc:"IPAM Puebla state program active.", link:"https://www.gob.mx/bienestar", returnees:9495, est2026:9700}, es:{desc:"Programa estatal IPAM Puebla activo.", link:"https://www.gob.mx/bienestar", returnees:9495, est2026:9700}},
"Quer茅taro": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:2305, est2026:2350}, es:{desc:"No se identifica programa estatal de reintegraci贸n (2025).", link:"https://www.gob.mx/bienestar", returnees:2305, est2026:2350}},
"Quintana Roo": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:289, est2026:300}, es:{desc:"No se identifica programa estatal de reintegraci贸n (2025).", link:"https://www.gob.mx/bienestar", returnees:289, est2026:300}},
"San Luis Potos铆": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:3747, est2026:3800}, es:{desc:"No se identifica programa estatal de reintegraci贸n (2025).", link:"https://www.gob.mx/bienestar", returnees:3747, est2026:3800}},
"Sinaloa": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:5775, est2026:5900}, es:{desc:"No se identifica programa estatal de reintegraci贸n (2025).", link:"https://www.gob.mx/bienestar", returnees:5775, est2026:5900}},
"Sonora": {en:{desc:"Federal programs support returned migrants.", link:"https://www.gob.mx/bienestar", returnees:3313, est2026:3400}, es:{desc:"Programas federales apoyan a migrantes retornados.", link:"https://www.gob.mx/bienestar", returnees:3313, est2026:3400}},
"Tabasco": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:1152, est2026:1200}, es:{desc:"No se identifica programa estatal de reintegraci贸n (2025).", link:"https://www.gob.mx/bienestar", returnees:1152, est2026:1200}},
"Tamaulipas": {en:{desc:"Federal programs + M茅xico te Abraza hub.", link:"https://www.gob.mx/bienestar", returnees:4750, est2026:4900}, es:{desc:"Programas federales + M茅xico te Abraza hub.", link:"https://www.gob.mx/bienestar", returnees:4750, est2026:4900}},
"Tlaxcala": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:720, est2026:750}, es:{desc:"No se identifica programa estatal de reintegraci贸n (2025).", link:"https://www.gob.mx/bienestar", returnees:720, est2026:750}},
"Veracruz": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:9643, est2026:9800}, es:{desc:"No se identifica programa estatal de reintegraci贸n (2025).", link:"https://www.gob.mx/bienestar", returnees:9643, est2026:9800}},
"Yucat谩n": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:289, est2026:300}, es:{desc:"No se identifica programa estatal de reintegraci贸n (2025).", link:"https://www.gob.mx/bienestar", returnees:289, est2026:300}},
"Zacatecas": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:3169, est2026:3250}, es:{desc:"No se identifica programa estatal de reintegraci贸n (2025).", link:"https://www.gob.mx/bienestar", returnees:3169, est2026:3250}}
};

// State centroids (approx.)
const stateCentroids = {
"Aguascalientes":[21.8853, -102.292],
"Baja California":[32.5149, -117.038],
"Baja California Sur":[24.1426, -110.313],
"Campeche":[19.8301, -90.5349],
"Chiapas":[16.7569, -93.1292],
"Chihuahua":[28.632, -106.069],
"Coahuila":[25.438, -100.974],
"Colima":[19.2433, -103.725],
"Durango":[24.0277, -104.653],
"Guanajuato":[21.019, -101.257],
"Guerrero":[17.5515, -99.5006],
"Hidalgo":[20.1011, -98.7624],
"Jalisco":[20.6597, -103.35],
"Mexico City":[19.4326, -99.1332],
"Estado de M茅xico":[19.2826, -99.6557],
"Michoac谩n":[19.5665, -101.707],
"Morelos":[18.6813, -99.1013],
"Nayarit":[21.7514, -104.846],
"Nuevo Le贸n":[25.6866, -100.316],
"Oaxaca":[17.0732, -96.7266],
"Puebla":[19.0414, -98.2063],
"Quer茅taro":[20.5888, -100.39],
"Quintana Roo":[19.1817, -88.4791],
"San Luis Potos铆":[22.1565, -100.986],
"Sinaloa":[24.8091, -107.394],
"Sonora":[29.0729, -110.956],
"Tabasco":[17.8409, -92.6189],
"Tamaulipas":[23.7417, -99.1459],
"Tlaxcala":[19.3182, -98.2375],
"Veracruz":[19.1738, -96.1342],
"Yucat谩n":[20.7099, -89.0943],
"Zacatecas":[22.7709, -102.583]
};

// Add markers
const markers = {};
for (let state in stateData) {
    const latlng = stateCentroids[state];
    let icon = L.icon({iconUrl:'https://cdn-icons-png.flaticon.com/512/252/252025.png', iconSize:[25,25]});
    // M茅xico te Abraza states
    const teAbrazaStates = ["Baja California","Sonora","Chihuahua","Coahuila","Nuevo Le贸n","Tamaulipas"];
    if (teAbrazaStates.includes(state)) {
        icon = L.icon({iconUrl:'https://cdn-icons-png.flaticon.com/512/190/190411.png', iconSize:[25,25]});
    }
    const marker = L.marker(latlng, {icon: icon}).addTo(map);
    marker.bindPopup(getPopupContent(state));
    markers[state] = marker;
}

// Popup content function
function getPopupContent(state) {
    const data = stateData[state][currentLang];
    return `<strong>${state}</strong><br>
    ${data.desc}<br>
    2025 returned: ${data.returnees}<br>
    2026 estimated: ${data.est2026}<br>
    <a href="${data.link}" target="_blank">Program Link</a>`;
}
</script>
</body>
</html>

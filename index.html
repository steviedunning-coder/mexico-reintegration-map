<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Mexico Reintegration Landscape (2026)</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
/>

<style>
  body {
    margin: 0;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  }

  #map {
    width: 100%;
    height: 90vh;
  }

  .legend {
    background: white;
    padding: 10px;
    line-height: 1.4em;
    border-radius: 6px;
    box-shadow: 0 0 8px rgba(0,0,0,0.2);
    font-size: 14px;
  }

  .legend span {
    display: inline-block;
    width: 14px;
    height: 14px;
    margin-right: 6px;
  }

  h1 {
    margin: 10px;
    font-size: 20px;
  }

  .note {
    font-size: 13px;
    margin: 0 10px 10px 10px;
    color: #444;
  }
</style>
</head>

<body>

<h1>Mexico Reintegration Landscape (State-Level, 2026)</h1>
<p class="note">
Programs shown focus on stabilization, economic integration, and productive return.
Migration dynamics are framed as <strong>events</strong> (return, asylum, transit) using
2025 federal reporting from the Unidad de Política Migratoria.
</p>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
// --------------------------------------------------
// BASIC MAP
// --------------------------------------------------
var map = L.map('map').setView([23.5, -102.0], 5);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: '&copy; OpenStreetMap contributors'
}).addTo(map);

// --------------------------------------------------
// STATE DATA (ALL 32 STATES)
// You can safely edit numbers & notes here
// --------------------------------------------------
const stateData = {
  "Aguascalientes": {status:"None", returnees2026:4200, events2025:"Low", notes:"Federal services only"},
  "Baja California": {status:"Active", returnees2026:38000, events2025:"High return & transit events", notes:"Federal + NGO employment linkage"},
  "Baja California Sur": {status:"None", returnees2026:3200, events2025:"Low", notes:"Federal services only"},
  "Campeche": {status:"None", returnees2026:4100, events2025:"Low", notes:"Federal services only"},
  "Chiapas": {status:"Active", returnees2026:12000, events2025:"High non-Mexican integration events", notes:"Refugee & migrant stabilization"},
  "Chihuahua": {status:"Active", returnees2026:27000, events2025:"High return events", notes:"Border reintegration initiatives"},
  "Coahuila": {status:"Pilot", returnees2026:14000, events2025:"Moderate return events", notes:"Employment linkage pilots"},
  "Colima": {status:"None", returnees2026:2500, events2025:"Low", notes:"Federal services only"},
  "Durango": {status:"None", returnees2026:5600, events2025:"Low", notes:"Federal services only"},
  "Guanajuato": {status:"Active", returnees2026:29000, events2025:"High historic return events", notes:"MigranteQuiero"},
  "Guerrero": {status:"None", returnees2026:18000, events2025:"High out-migration events", notes:"Low reintegration capacity"},
  "Hidalgo": {status:"None", returnees2026:9000, events2025:"Moderate", notes:"Federal services only"},
  "Jalisco": {status:"Active", returnees2026:34000, events2025:"High", notes:"State + Ventanilla Migrante"},
  "Mexico City": {status:"Active", returnees2026:22000, events2025:"High absorptive capacity", notes:"Multi-agency integration"},
  "Estado de México": {status:"Active", returnees2026:31000, events2025:"High", notes:"Fondo de Apoyo a Migrantes"},
  "Michoacán": {status:"Pilot", returnees2026:26000, events2025:"High diaspora-linked events", notes:"Productive return pilots"},
  "Morelos": {status:"Active", returnees2026:8200, events2025:"Moderate", notes:"Morelos te Abraza"},
  "Nayarit": {status:"None", returnees2026:6100, events2025:"Low", notes:"Federal services only"},
  "Nuevo León": {status:"Active", returnees2026:19000, events2025:"Moderate", notes:"Private sector absorption"},
  "Oaxaca": {status:"Active", returnees2026:24000, events2025:"High indigenous return events", notes:"Oaxaca es tu Tierra"},
  "Puebla": {status:"Active", returnees2026:21000, events2025:"High", notes:"IPAM Puebla"},
  "Querétaro": {status:"None", returnees2026:7000, events2025:"Low", notes:"Federal services only"},
  "Quintana Roo": {status:"Pilot", returnees2026:15000, events2025:"High labor mobility events", notes:"Tourism labor absorption"},
  "San Luis Potosí": {status:"None", returnees2026:8800, events2025:"Low", notes:"Federal services only"},
  "Sinaloa": {status:"None", returnees2026:9500, events2025:"Moderate", notes:"Federal services only"},
  "Sonora": {status:"Active", returnees2026:23000, events2025:"High border events", notes:"Border reintegration focus"},
  "Tabasco": {status:"None", returnees2026:6700, events2025:"Moderate", notes:"Federal services only"},
  "Tamaulipas": {status:"Active", returnees2026:28000, events2025:"High deportation events", notes:"Federal + state response"},
  "Tlaxcala": {status:"None", returnees2026:3900, events2025:"Low", notes:"Federal services only"},
  "Veracruz": {status:"None", returnees2026:20000, events2025:"High out-migration events", notes:"Limited reintegration capacity"},
  "Yucatán": {status:"None", returnees2026:4800, events2025:"Low", notes:"Federal services only"},
  "Zacatecas": {status:"None", returnees2026:17000, events2025:"High historic return events", notes:"Federal services only"}
};

// --------------------------------------------------
// COLOR LOGIC
// --------------------------------------------------
function getColor(status) {
  return status === "Active" ? "#1a9850" :
         status === "Pilot"  ? "#fee08b" :
                               "#d73027";
}

// --------------------------------------------------
// LOAD MEXICO STATES GEOJSON (INLINE FETCH)
// --------------------------------------------------
fetch("https://raw.githubusercontent.com/angelnmara/geojson/master/mexicoHigh.json")
  .then(res => res.json())
  .then(data => {

    L.geoJSON(data, {
      style: function(feature) {
        const name = feature.properties.name;
        const info = stateData[name];
        return {
          fillColor: info ? getColor(info.status) : "#ccc",
          weight: 1,
          color: "#333",
          fillOpacity: 0.7
        };
      },
      onEachFeature: function(feature, layer) {
        const name = feature.properties.name;
        const info = stateData[name];

        if (info) {
          layer.bindPopup(`
            <strong>${name}</strong><br>
            <b>Status:</b> ${info.status}<br>
            <b>Estimated Returnees 2026:</b> ${info.returnees2026.toLocaleString()}<br>
            <b>Migration Events (2025):</b> ${info.events2025}<br>
            <b>Notes:</b> ${info.notes}<br><br>
            <a href="http://www.politicamigratoria.gob.mx/es/PoliticaMigratoria/tablero_estadistica" target="_blank">
              Source: Unidad de Política Migratoria (2025)
            </a>
          `);
        }
      }
    }).addTo(map);
  });

// --------------------------------------------------
// LEGEND
// --------------------------------------------------
var legend = L.control({position: 'bottomright'});

legend.onAdd = function () {
  var div = L.DomUtil.create('div', 'legend');
  div.innerHTML += '<b>Reintegration Status</b><br>';
  div.innerHTML += '<span style="background:#1a9850"></span> Active<br>';
  div.innerHTML += '<span style="background:#fee08b"></span> Pilot<br>';
  div.innerHTML += '<span style="background:#d73027"></span> None<br>';
  return div;
};

legend.addTo(map);
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Mexico Return & Reintegration Map (2025â€“2026)</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
/>

<style>
  body { margin:0; font-family: Arial, sans-serif; }
  #map { height: 100vh; width: 100%; }

  .legend {
    position: absolute;
    bottom: 20px;
    left: 20px;
    background: white;
    padding: 12px;
    border-radius: 6px;
    box-shadow: 0 0 6px rgba(0,0,0,0.3);
    font-size: 13px;
    line-height: 1.4;
  }
</style>
</head>

<body>
<div id="map"></div>

<div class="legend">
  <strong>How to use this map</strong><br>
  â€¢ Click a state marker to view return data & programs<br><br>

  <strong>Overlays</strong><br>
  ðŸ”µ Mexican nationals returned (2025)<br>
  ðŸŸ  Non-Mexican nationals returned to Mexico (structure only)<br><br>

  <strong>Data source</strong><br>
  Unidad de PolÃ­tica Migratoria, Registro e Identidad de Personas (UPMRIP)<br>
  SecretarÃ­a de GobernaciÃ³n (SEGOB)<br>
  <em>BoletÃ­n Mensual de EstadÃ­sticas Migratorias 2025â€“2026</em>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
// ---------------- MAP BASE ----------------
const map = L.map("map").setView([23.7, -102.5], 5);

L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
  attribution: "Â© OpenStreetMap contributors"
}).addTo(map);

// ---------------- OVERLAY GROUPS ----------------
const mexicanReturns = L.layerGroup().addTo(map);
const nonMexicanReturns = L.layerGroup();

// ---------------- STATE DATA ----------------
const states = [
  // name, lat, lng, % origin, est count, programs
  ["Guerrero", 17.55, -99.50, 9.9, 14261, ""],
  ["Oaxaca", 17.07, -96.72, 8.7, 12533, "State reintegration & employment initiatives"],
  ["Chiapas", 16.75, -93.12, 8.1, 11669, ""],
  ["MichoacÃ¡n", 19.15, -101.88, 7.9, 11381, ""],
  ["Guanajuato", 21.02, -101.25, 6.8, 9796, "Conecta platform (employment linkage)"],
  ["Veracruz", 19.18, -96.14, 6.7, 9640, ""],
  ["Puebla", 19.04, -98.20, 6.6, 9505, "State employment & training initiatives"],
  ["Estado de MÃ©xico", 19.35, -99.76, 5.0, 7203, "Emerging reintegration & labor programs"],
  ["Jalisco", 20.66, -103.35, 4.2, 6050, "Fondo de Apoyo a Migrantes"],
  ["Sinaloa", 24.80, -107.39, 4.0, 5762, ""],
  ["Tamaulipas", 23.74, -99.14, 3.3, 4754, ""],
  ["Hidalgo", 20.10, -98.76, 2.6, 3746, ""],
  ["San Luis PotosÃ­", 22.15, -100.98, 2.6, 3746, ""],
  ["Sonora", 29.07, -110.95, 2.3, 3313, ""],
  ["Zacatecas", 22.77, -102.58, 2.2, 3169, ""],
  ["Mexico City", 19.43, -99.13, 2.2, 3169, ""],
  ["Baja California", 30.84, -115.28, 2.1, 3025, ""],
  ["Durango", 24.03, -104.65, 1.6, 2305, ""],
  ["Nayarit", 21.75, -104.85, 1.4, 2017, ""],
  ["Coahuila", 27.06, -101.71, 1.4, 2017, ""],
  ["Morelos", 18.92, -99.23, 1.3, 1873, "State reintegration initiatives"],
  ["Aguascalientes", 21.88, -102.29, 1.1, 1585, ""],
  ["Tabasco", 17.84, -92.62, 0.8, 1152, ""],
  ["Nuevo LeÃ³n", 25.59, -99.99, 0.8, 1152, ""],
  ["Tlaxcala", 19.32, -98.20, 0.5, 720, ""],
  ["Colima", 19.24, -103.72, 0.4, 576, ""],
  ["Campeche", 19.83, -90.53, 0.3, 432, ""],
  ["YucatÃ¡n", 20.71, -89.09, 0.2, 288, ""],
  ["Quintana Roo", 19.18, -88.48, 0.2, 288, ""],
  ["Baja California Sur", 26.04, -111.67, 0.1, 144, ""]
];

// ---------------- MARKERS ----------------
states.forEach(s => {
  const popup = `
    <strong>${s[0]}</strong><br>
    Estimated returns (2025): <strong>${s[4].toLocaleString()}</strong><br>
    Share of national total: ${s[3]}%<br>
    ${s[5] ? "<br><strong>Programs:</strong><br>" + s[5] : ""}
  `;

  L.circleMarker([s[1], s[2]], {
    radius: 6,
    color: "#1f78b4",
    fillOpacity: 0.8
  })
  .bindPopup(popup)
  .addTo(mexicanReturns);
});

// ---------------- LAYER CONTROL ----------------
L.control.layers(null, {
  "Mexican nationals returned (2025)": mexicanReturns,
  "Non-Mexican nationals returned to Mexico": nonMexicanReturns
}).addTo(map);
</script>
</body>
</html>

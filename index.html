<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Mexico Return & Reintegration Map – 2025</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
/>

<style>
  html, body { height: 100%; margin: 0; }
  #map { height: 100vh; width: 100%; }

  .legend {
    position: fixed;
    bottom: 20px;
    left: 20px;
    background: white;
    padding: 12px 14px;
    border-radius: 6px;
    font-size: 13px;
    line-height: 1.45;
    box-shadow: 0 2px 12px rgba(0,0,0,0.2);
    z-index: 1000;
    max-width: 340px;
  }
</style>
</head>

<body>
<div id="map"></div>

<div class="legend">
  <strong>How to use this map</strong><br>
  Click a state marker to view 2025 return data and 2026 programs/pilots.<br><br>

  <strong>Toggle datasets:</strong><br>
  Use the toggle button (top-left) to switch between<br>
  • Mexican national returnees<br>
  • Non-Mexican returnees to Mexico<br><br>

  <strong>Data source:</strong><br>
  Unidad de Política Migratoria, Registro e Identidad de Personas (UPMRIP), SEGOB<br>
  <em>Boletín de Estadísticas Migratorias 2025 (Jan–Nov)</em>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
const map = L.map("map").setView([23.5, -102], 5);

L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
  attribution: "&copy; OpenStreetMap contributors"
}).addTo(map);

/* ---------- STATE CENTROIDS ---------- */
const coords = {
  "Aguascalientes":[21.88,-102.29],"Baja California":[32.51,-117.03],
  "Baja California Sur":[24.14,-110.31],"Campeche":[19.83,-90.53],
  "Chiapas":[16.75,-93.12],"Chihuahua":[28.63,-106.07],
  "Coahuila":[25.43,-100.99],"Colima":[19.24,-103.72],
  "Durango":[24.03,-104.65],"Guanajuato":[21.01,-101.25],
  "Guerrero":[17.55,-99.50],"Hidalgo":[20.10,-98.76],
  "Jalisco":[20.65,-103.35],"Mexico City":[19.43,-99.13],
  "Estado de México":[19.28,-99.65],"Michoacán":[19.56,-101.70],
  "Morelos":[18.68,-99.10],"Nayarit":[21.75,-104.84],
  "Nuevo León":[25.68,-100.31],"Oaxaca":[17.07,-96.72],
  "Puebla":[19.04,-98.20],"Querétaro":[20.58,-100.39],
  "Quintana Roo":[19.18,-88.48],"San Luis Potosí":[22.15,-100.98],
  "Sinaloa":[24.80,-107.39],"Sonora":[29.07,-110.95],
  "Tabasco":[17.84,-92.61],"Tamaulipas":[23.74,-99.14],
  "Tlaxcala":[19.31,-98.23],"Veracruz":[19.17,-96.13],
  "Yucatán":[20.70,-89.09],"Zacatecas":[22.77,-102.58]
};

/* ---------- 2025 + 2026 STATE DATA ---------- */
const stateInfo = {
  "Aguascalientes":{mx:1580,program:"Federal reintegration access via Bienestar; no standalone state program announced 2026."},
  "Baja California":{mx:3020,program:"México Te Abraza operating; cross-border reception and NGO employment pilots ongoing."},
  "Baja California Sur":{mx:144,program:"Federal support only; no announced 2026 state pilot."},
  "Campeche":{mx:432,program:"Limited return volume; federal assistance via Bienestar."},
  "Chiapas":{mx:11660,program:"Humanitarian reception, refugee overlap programs, labor stabilization pilots."},
  "Chihuahua":{mx:5180,program:"México Te Abraza; coordination with municipal employment hubs."},
  "Coahuila":{mx:2016,program:"México Te Abraza; job placement coordination with private sector."},
  "Colima":{mx:576,program:"No dedicated state reintegration program announced."},
  "Durango":{mx:2304,program:"Federal support only; remittance-linked employment discussions reported."},
  "Guanajuato":{mx:9790,program:"Conecta platform; private-sector job matching continues 2026."},
  "Guerrero":{mx:14260,program:"High return rate; federal reintegration and violence-prevention overlap."},
  "Hidalgo":{mx:3734,program:"No dedicated state program reported."},
  "Jalisco":{mx:6048,program:"Fondo de Apoyo a Migrantes continues with employability focus."},
  "Mexico City":{mx:3168,program:"Multi-agency integration and documentation access."},
  "Estado de México":{mx:7205,program:"Fondo de Apoyo a Migrantes; employment linkage focus."},
  "Michoacán":{mx:11388,program:"Productive return and cooperative pilots ongoing."},
  "Morelos":{mx:1873,program:"State-level reintegration coordination and skills workshops."},
  "Nayarit":{mx:2016,program:"Federal programs only."},
  "Nuevo León":{mx:1152,program:"México Te Abraza; employer-driven reintegration focus."},
  "Oaxaca":{mx:12526,program:"Oaxaca es tu Tierra; indigenous-focused reintegration pilots."},
  "Puebla":{mx:9490,program:"IPAM Puebla; state-run reintegration services."},
  "Querétaro":{mx:2304,program:"Federal support only."},
  "Quintana Roo":{mx:288,program:"Tourism-linked labor reintegration discussions."},
  "San Luis Potosí":{mx:3746,program:"Federal assistance; no new state pilot announced."},
  "Sinaloa":{mx:5762,program:"State coordination with federal employment programs."},
  "Sonora":{mx:3318,program:"México Te Abraza; reception and transit support."},
  "Tabasco":{mx:1152,program:"Federal assistance only."},
  "Tamaulipas":{mx:4753,program:"México Te Abraza; humanitarian + employment focus."},
  "Tlaxcala":{mx:720,program:"Federal support only."},
  "Veracruz":{mx:9657,program:"Federal programs; high circular migration return."},
  "Yucatán":{mx:288,program:"Limited return volume; no state pilot announced."},
  "Zacatecas":{mx:3168,program:"Federal reintegration support; diaspora coordination interest."}
};

/* ---------- LAYERS ---------- */
const mexicanLayer = L.layerGroup();
const nonMexicanLayer = L.layerGroup();

Object.keys(coords).forEach(state => {
  const c = coords[state];
  const d = stateInfo[state];

  L.marker(c)
    .bindPopup(`
      <strong>${state}</strong><br>
      <strong>Mexican nationals returned (2025):</strong> ${d.mx.toLocaleString()}<br><br>
      <strong>2026 programs / pilots:</strong><br>
      ${d.program}<br><br>
      <a href="https://www.gob.mx/segob/acciones-y-programas/unidad-de-politica-migratoria-registro-e-identidad-de-personas"
         target="_blank">UPMRIP – SEGOB</a>
    `)
    .addTo(mexicanLayer);

  L.marker(c)
    .bindPopup(`
      <strong>${state}</strong><br>
      <strong>Non-Mexican returnees:</strong><br>
      State-level disaggregation not published in 2025 UPMRIP bulletin.
    `)
    .addTo(nonMexicanLayer);
});

mexicanLayer.addTo(map);

/* ---------- TOGGLE ---------- */
L.control.layers(
  {
    "Mexican national returnees (2025)": mexicanLayer,
    "Non-Mexican returnees to Mexico": nonMexicanLayer
  },
  null,
  { position: "topleft", collapsed: false }
).addTo(map);
</script>
</body>
</html>

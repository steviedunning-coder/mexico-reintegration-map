<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Mexico Return & Reintegration (2025â€“2026)</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
html, body { height:100%; margin:0; font-family: Arial, sans-serif; }
#map { height:100vh; width:100%; }

.legend {
  position: fixed;
  bottom: 20px;
  left: 20px;
  background: white;
  padding: 14px 16px;
  border-radius: 6px;
  font-size: 13px;
  box-shadow: 0 2px 12px rgba(0,0,0,.25);
  max-width: 420px;
  z-index: 1000;
}
.legend span { display:block; margin-bottom:4px; }
.legend a { color:#0057b7; text-decoration:none; }
</style>
</head>

<body>

<div id="map"></div>

<div class="legend">
<strong>Mexico Return & Reintegration (2025â€“2026)</strong><br><br>

Use the toggle (top-left) to switch between:<br>
â€¢ <strong>State of Origin</strong> (where people are from)<br>
â€¢ <strong>State of Destination</strong> (where people arrive)<br><br>

Click a state to view:<br>
â€¢ Returned Mexican nationals (2025)<br>
â€¢ Active, pilot, or emerging reintegration programs (2026)<br><br>

<strong>Data source</strong><br>
Unidad de PolÃ­tica Migratoria, Registro e Identidad de Personas (SEGOB)<br>
<em>BoletÃ­n de EstadÃ­sticas Migratorias 2025 (eneroâ€“noviembre)</em><br><br>

Total Mexican nationals returned (2025): <strong>144,061</strong>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
const map = L.map("map").setView([23.5, -102], 5);
L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
 { attribution: "Â© OpenStreetMap contributors" }).addTo(map);

/* -------- STATE CENTROIDS -------- */
const coords = {
"Aguascalientes":[21.88,-102.29],"Baja California":[32.51,-117.03],
"Baja California Sur":[24.14,-110.31],"Campeche":[19.83,-90.53],
"Chiapas":[16.75,-93.12],"Chihuahua":[28.63,-106.07],
"Coahuila":[25.43,-100.99],"Colima":[19.24,-103.72],
"Durango":[24.03,-104.65],"Guanajuato":[21.01,-101.25],
"Guerrero":[17.55,-99.50],"Hidalgo":[20.10,-98.76],
"Jalisco":[20.65,-103.35],"Mexico City":[19.43,-99.13],
"Estado de MÃ©xico":[19.28,-99.65],"MichoacÃ¡n":[19.56,-101.70],
"Morelos":[18.68,-99.10],"Nayarit":[21.75,-104.84],
"Nuevo LeÃ³n":[25.68,-100.31],"Oaxaca":[17.07,-96.72],
"Puebla":[19.04,-98.20],"QuerÃ©taro":[20.58,-100.39],
"Quintana Roo":[19.18,-88.48],"San Luis PotosÃ­":[22.15,-100.98],
"Sinaloa":[24.80,-107.39],"Sonora":[29.07,-110.95],
"Tabasco":[17.84,-92.61],"Tamaulipas":[23.74,-99.14],
"Tlaxcala":[19.31,-98.23],"Veracruz":[19.17,-96.13],
"YucatÃ¡n":[20.70,-89.09],"Zacatecas":[22.77,-102.58]
};

/* -------- DATA -------- */
const states = {
"Guerrero":{origin:14260,dest:10084},
"Oaxaca":{origin:12526,dest:8644},
"Chiapas":{origin:11667,dest:0},
"MichoacÃ¡n":{origin:11388,dest:8357},
"Guanajuato":{origin:9790,dest:8357},
"Veracruz":{origin:9647,dest:6761},
"Puebla":{origin:9490,dest:7059},
"Estado de MÃ©xico":{origin:7205,dest:6040},
"Jalisco":{origin:6048,dest:4753},
"Sinaloa":{origin:5762,dest:4322},
"Tamaulipas":{origin:4753,dest:7635},
"Sonora":{origin:3318,dest:5032},
"Baja California":{origin:3020,dest:24072},
"Mexico City":{origin:3169,dest:3169},
"Hidalgo":{origin:3746,dest:3169},
"San Luis PotosÃ­":{origin:3746,dest:3318},
"Nuevo LeÃ³n":{origin:1152,dest:2305},
"Morelos":{origin:1873,dest:1729},
"Aguascalientes":{origin:1585,dest:1441},
"Durango":{origin:2305,dest:1873},
"Nayarit":{origin:2017,dest:1441},
"Coahuila":{origin:2017,dest:2449},
"Zacatecas":{origin:3169,dest:2737},
"QuerÃ©taro":{origin:0,dest:2305},
"Tabasco":{origin:1152,dest:864},
"Tlaxcala":{origin:720,dest:576},
"Colima":{origin:576,dest:432},
"Campeche":{origin:432,dest:432},
"Quintana Roo":{origin:288,dest:288},
"YucatÃ¡n":{origin:288,dest:288},
"Baja California Sur":{origin:144,dest:144}
};

/* -------- PROGRAM INFO (UNCHANGED ACROSS VIEWS) -------- */
const programs = {
"Morelos":"ðŸŸ¢ Morelos te Abraza; Migrantes en el CorazÃ³n",
"Puebla":"ðŸŸ¢ IPAM; Centro de CapacitaciÃ³n para el Empleo",
"Guanajuato":"ðŸŸ¢ Conecta (coneecta.net); ðŸŸ¡ MigranteQuiero",
"MichoacÃ¡n":"ðŸŸ¡ IDEASnet â€“ Financial Inclusion",
"Oaxaca":"ðŸŸ¢ Oaxaca es tu tierra",
"Jalisco":"ðŸŸ¢ Fondo de Apoyo a Migrantes",
"Tamaulipas":"ðŸŸ¢ Acceso Latino â€“ CAMINO; âšª Tarjeta Paisano",
"Baja California":"âšª Tarjeta Paisano",
"Sonora":"âšª Tarjeta Paisano",
"Chihuahua":"âšª Tarjeta Paisano",
"Coahuila":"âšª Tarjeta Paisano",
"Nuevo LeÃ³n":"âšª Tarjeta Paisano"
};

/* -------- LAYERS -------- */
const originLayer = L.layerGroup();
const destLayer = L.layerGroup();

Object.keys(coords).forEach(state=>{
  const c = coords[state];
  const d = states[state] || {};
  const prog = programs[state] || "Federal reintegration programs available nationwide";

  const originPopup = `
    <strong>${state}</strong><br>
    <strong>Returned (state of origin, 2025):</strong>
    ${(d.origin||0).toLocaleString()}<br><br>
    <strong>Programs & initiatives:</strong><br>${prog}
  `;

  const destPopup = `
    <strong>${state}</strong><br>
    <strong>Returned (state of destination, 2025):</strong>
    ${(d.dest||0).toLocaleString()}<br><br>
    <strong>Programs & initiatives:</strong><br>${prog}
  `;

  L.marker(c).bindPopup(originPopup).addTo(originLayer);
  L.marker(c).bindPopup(destPopup).addTo(destLayer);
});

originLayer.addTo(map);

L.control.layers(
  { "State of Origin": originLayer, "State of Destination": destLayer },
  null,
  { collapsed:false, position:"topleft" }
).addTo(map);
</script>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mexico Reintegration Map</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<style>
  #map { height: 90vh; width: 100%; }
  .legend { background: white; padding: 10px; line-height: 1.4; }
  .toggle-btn { margin: 5px; padding: 5px 10px; }
</style>
</head>
<body>
<h2>Mexico Reintegration Map (2026 Estimates)</h2>
<div>
  <button id="langBtn" class="toggle-btn">Espa√±ol / English</button>
</div>
<div id="map"></div>
<div class="legend">
  <b>Legend:</b><br>
  üîµ Mexico te Abraza hub<br>
  üü¢ State-level program<br>
  ‚ö™ No state-level program identified<br>
  <br>
  <b>Data sources:</b> Secretar√≠a de Gobernaci√≥n, Pol√≠tica Migratoria ‚Äì Tablero Estad√≠stico (2025). 144,061 Mexican nationals returned in 2025 (Jan-Nov).
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>

// Map initialization
const map = L.map('map').setView([23.6345, -102.5528], 5);

// Base layer
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: '&copy; OpenStreetMap contributors'
}).addTo(map);

// State data (program info + estimated 2026 returnees)
const stateData = {
  "Aguascalientes": {en:{desc:"No state-level reintegration program identified (2025). Federal options available.", link:"https://www.gob.mx/bienestar", returnees:1587}, es:{desc:"No se identifica programa estatal de reintegraci√≥n (2025). Opciones federales disponibles.", link:"https://www.gob.mx/bienestar", returnees:1587}},
  "Baja California": {en:{desc:"Federal and NGO programs support returned migrants.", link:"https://www.gob.mx/bienestar", returnees:3025}, es:{desc:"Programas federales y ONG apoyan a migrantes retornados.", link:"https://www.gob.mx/bienestar", returnees:3025}, teAbraza:true},
  "Baja California Sur": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:144}, es:{desc:"No se identifica programa estatal de reintegraci√≥n (2025).", link:"https://www.gob.mx/bienestar", returnees:144}},
  "Campeche": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:433}, es:{desc:"No se identifica programa estatal de reintegraci√≥n (2025).", link:"https://www.gob.mx/bienestar", returnees:433}},
  "Chiapas": {en:{desc:"Refugee & migrant stabilization, pilot programs emerging.", link:"https://www.gob.mx/bienestar", returnees:1160}, es:{desc:"Estabilizaci√≥n de refugiados y migrantes, programas piloto emergentes.", link:"https://www.gob.mx/bienestar", returnees:1160}},
  "Chihuahua": {en:{desc:"Federal + municipal Mexico te Abraza hub.", link:"https://www.gob.mx/bienestar", returnees:5182}, es:{desc:"Refugios federales + hub M√©xico te Abraza municipal.", link:"https://www.gob.mx/bienestar", returnees:5182}, teAbraza:true},
  "Coahuila": {en:{desc:"Federal Mexico te Abraza hub + employment linkage programs.", link:"https://www.gob.mx/bienestar", returnees:2016}, es:{desc:"Hub M√©xico te Abraza federal + programas de vinculaci√≥n laboral.", link:"https://www.gob.mx/bienestar", returnees:2016}, teAbraza:true},
  "Colima": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:577}, es:{desc:"No se identifica programa estatal de reintegraci√≥n (2025).", link:"https://www.gob.mx/bienestar", returnees:577}},
  "Durango": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:2305}, es:{desc:"No se identifica programa estatal de reintegraci√≥n (2025).", link:"https://www.gob.mx/bienestar", returnees:2305}},
  "Guanajuato": {en:{desc:"Conecta state reintegration program active.", link:"https://migrantequiero.guanajuato.gob.mx", returnees:9785}, es:{desc:"Programa estatal Conecta activo.", link:"https://migrantequiero.guanajuato.gob.mx", returnees:9785}},
  "Guerrero": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:14295}, es:{desc:"No se identifica programa estatal de reintegraci√≥n (2025).", link:"https://www.gob.mx/bienestar", returnees:14295}},
  "Hidalgo": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:3756}, es:{desc:"No se identifica programa estatal de reintegraci√≥n (2025).", link:"https://www.gob.mx/bienestar", returnees:3756}},
  "Jalisco": {en:{desc:"Fondo de Apoyo a Migrantes + state programs.", link:"https://www.jalisco.gob.mx", returnees:6042}, es:{desc:"Fondo de Apoyo a Migrantes + programas estatales.", link:"https://www.jalisco.gob.mx", returnees:6042}},
  "Mexico City": {en:{desc:"Multi-agency integration services.", link:"https://www.cdmx.gob.mx", returnees:3169}, es:{desc:"Servicios de integraci√≥n multi-agencia.", link:"https://www.cdmx.gob.mx", returnees:3169}},
  "Estado de M√©xico": {en:{desc:"Fondo de Apoyo a Migrantes.", link:"https://www.edomex.gob.mx", returnees:7205}, es:{desc:"Fondo de Apoyo a Migrantes.", link:"https://www.edomex.gob.mx", returnees:7205}},
  "Michoac√°n": {en:{desc:"Pilot productive return programs active.", link:"https://www.gob.mx/bienestar", returnees:11387}, es:{desc:"Programas piloto de retorno productivo activos.", link:"https://www.gob.mx/bienestar", returnees:11387}},
  "Morelos": {en:{desc:"Morelos te Abraza.", link:"https://www.morelos.gob.mx", returnees:1873}, es:{desc:"Morelos te Abraza.", link:"https://www.morelos.gob.mx", returnees:1873}},
  "Nayarit": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:2016}, es:{desc:"No se identifica programa estatal de reintegraci√≥n (2025).", link:"https://www.gob.mx/bienestar", returnees:2016}},
  "Nuevo Le√≥n": {en:{desc:"Federal Mexico te Abraza hub + employment programs.", link:"https://www.nl.gob.mx", returnees:1152}, es:{desc:"Hub M√©xico te Abraza federal + programas de empleo.", link:"https://www.nl.gob.mx", returnees:1152}, teAbraza:true},
  "Oaxaca": {en:{desc:"Oaxaca es tu Tierra program active.", link:"https://www.gob.mx/bienestar", returnees:12528}, es:{desc:"Programa Oaxaca es tu Tierra activo.", link:"https://www.gob.mx/bienestar", returnees:12528}},
  "Puebla": {en:{desc:"IPAM Puebla state program active.", link:"https://www.gob.mx/bienestar", returnees:10157}, es:{desc:"Programa estatal IPAM Puebla activo.", link:"https://www.gob.mx/bienestar", returnees:10157}},
  "Quer√©taro": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:2305}, es:{desc:"No se identifica programa estatal de reintegraci√≥n (2025).", link:"https://www.gob.mx/bienestar", returnees:2305}},
  "Quintana Roo": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:288}, es:{desc:"No se identifica programa estatal de reintegraci√≥n (2025).", link:"https://www.gob.mx/bienestar", returnees:288}},
  "San Luis Potos√≠": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:3747}, es:{desc:"No se identifica programa estatal de reintegraci√≥n (2025).", link:"https://www.gob.mx/bienestar", returnees:3747}},
  "Sinaloa": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:5762}, es:{desc:"No se identifica programa estatal de reintegraci√≥n (2025).", link:"https://www.gob.mx/bienestar", returnees:5762}},
  "Sonora": {en:{desc:"Federal Mexico te Abraza hub.", link:"https://www.gob.mx/bienestar", returnees:3323}, es:{desc:"Hub M√©xico te Abraza federal.", link:"https://www.gob.mx/bienestar", returnees:3323}, teAbraza:true},
  "Tabasco": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:1152}, es:{desc:"No se identifica programa estatal de reintegraci√≥n (2025).", link:"https://www.gob.mx/bienestar", returnees:1152}},
  "Tamaulipas": {en:{desc:"Federal Mexico te Abraza hub.", link:"https://www.gob.mx/bienestar", returnees:4754}, es:{desc:"Hub M√©xico te Abraza federal.", link:"https://www.gob.mx/bienestar", returnees:4754}, teAbraza:true},
  "Tlaxcala": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:720}, es:{desc:"No se identifica programa estatal de reintegraci√≥n (2025).", link:"https://www.gob.mx/bienestar", returnees:720}},
  "Veracruz": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:9653}, es:{desc:"No se identifica programa estatal de reintegraci√≥n (2025).", link:"https://www.gob.mx/bienestar", returnees:9653}},
  "Yucat√°n": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:288}, es:{desc:"No se identifica programa estatal de reintegraci√≥n (2025).", link:"https://www.gob.mx/bienestar", returnees:288}},
  "Zacatecas": {en:{desc:"No state-level reintegration program identified (2025).", link:"https://www.gob.mx/bienestar", returnees:316}, es:{desc:"No se identifica programa estatal de reintegraci√≥n (2025).", link:"https://www.gob.mx/bienestar", returnees:316}}
};

// Function to set popup for each state
function onEachFeature(feature, layer) {
  const name = feature.properties.name;
  const state = stateData[name];
  if (!state) return;
  const popupContent = `
    <b>${name}</b><br>
    <span id="desc">${state.en.desc}</span><br>
    <a href="${state.en.link}" target="_blank">Program link</a><br>
    Estimated returned 2026: ${state.en.returnees.toLocaleString()}
  `;
  layer.bindPopup(popupContent);
}

// Load GeoJSON for Mexican states
fetch('https://raw.githubusercontent.com/martinrue/Mexico-States-GeoJSON/main/mexico_states.geojson')
.then(res => res.json())
.then(data => {
  L.geoJSON(data, {
    style: function(feature) {
      const name = feature.properties.name;
      if (stateData[name] && stateData[name].teAbraza) return {color:'#1f77b4', weight:2, fillOpacity:0.3};
      return {color:'#888', weight:1, fillOpacity:0.1};
    },
    onEachFeature: onEachFeature
  }).addTo(map);
});

// Language toggle
let lang = 'en';
document.getElementById('langBtn').addEventListener('click', ()=>{
  lang = lang==='en'?'es':'en';
  map.eachLayer(function(layer){
    if(layer.feature){
      const name = layer.feature.properties.name;
      const state = stateData[name];
      if(!state) return;
      const popupContent = `
        <b>${name}</b><br>
        <span id="desc">${state[lang].desc}</span><br>
        <a href="${state[lang].link}" target="_blank">Program link</a><br>
        Estimated returned 2026: ${state[lang].returnees.toLocaleString()}
      `;
      layer.bindPopup(popupContent);
    }
  });
});

</script>
</body>
</html>
